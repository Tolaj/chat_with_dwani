

<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>

    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pt-20 pb-16 text-center lg:pt-32">
        <p class="mx-auto -mt-4 max-w-2xl text-lg tracking-tight text-slate-700 sm:mt-6">
            <span class="border-b border-dotted border-slate-300 text-red-400">  </span>
        </p>
    
        <h1 class="mx-auto max-w-4xl font-display text-5xl font-medium tracking-tight text-slate-900 sm:text-7xl">
            <span class="inline-block">Welcome To 
                <span class="relative whitespace-nowrap text-blue-600">
                <svg aria-hidden="true" viewBox="0 0 418 42" class="absolute top-2/3 left-0 h-[0.58em] w-full fill-blue-300/70" preserveAspectRatio="none"><path d="M203.371.916c-26.013-2.078-76.686 1.963-124.73 9.946L67.3 12.749C35.421 18.062 18.2 21.766 6.004 25.934 1.244 27.561.828 27.778.874 28.61c.07 1.214.828 1.121 9.595-1.176 9.072-2.377 17.15-3.92 39.246-7.496C123.565 7.986 157.869 4.492 195.942 5.046c7.461.108 19.25 1.696 19.17 2.582-.107 1.183-7.874 4.31-25.75 10.366-21.992 7.45-35.43 12.534-36.701 13.884-2.173 2.308-.202 4.407 4.442 4.734 2.654.187 3.263.157 15.593-.78 35.401-2.686 57.944-3.488 88.365-3.143 46.327.526 75.721 2.23 130.788 7.584 19.787 1.924 20.814 1.98 24.557 1.332l.066-.011c1.201-.203 1.53-1.825.399-2.335-2.911-1.31-4.893-1.604-22.048-3.261-57.509-5.556-87.871-7.36-132.059-7.842-23.239-.254-33.617-.116-50.627.674-11.629.54-42.371 2.494-46.696 2.967-2.359.259 8.133-3.625 26.504-9.81 23.239-7.825 27.934-10.149 28.304-14.005.417-4.348-3.529-6-16.878-7.066Z"></path></svg>
                <span class="relative">Dwani</span></span>
            </span>
            <span class="inline-block">Chats</span>
        </h1>
    
        <p class="mx-auto mt-9 max-w-2xl text-lg tracking-tight text-slate-700 sm:mt-6">
            <span class="inline-block">Open platform to chat with strangers</span>
            <span class="inline-block"></span>
        </p>
    
        
                <div class="mt-16 mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
                    <div class="rounded-3xl bg-[#2563eb] py-10 px-6 sm:py-16 sm:px-12 lg:flex lg:items-center lg:p-20">
                    <div class="lg:w-0 lg:flex-1">
                        <h2 class="text-3xl font-bold tracking-tight text-white">Enter your Dwanichat details</h2>
                        <p class="mt-4 max-w-3xl text-lg text-gray-100">
                            To create a new chat room provide username and  new room id or join existing chat room by providing room id.
                        </p>
                    </div>
                    <div class="mt-12 sm:w-full sm:max-w-md lg:mt-0 lg:ml-8 lg:flex-1">
                        <form action="/joinRoom" method="POST"  class="sm:flex space-y-2">
                        <label for="name" class="sr-only">Username</label>
                        <label for="email-address" class="sr-only">Room ID</label>
                        <input id="username" type="text" name="username" autocomplete="name" class="w-full rounded-md sm:mr-3 border-white px-5 py-3 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-700" placeholder="Username" required>
                        <input id="room-id" onkeyup=checkRoomID(event) type="text" name="room" autocomplete="email" class="w-full rounded-md border-white px-5 py-3 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-700" placeholder="Room ID" required>
                        <input type="checkbox" value="1" class="hidden" tabindex="-1" autocomplete="off">
                        <button type="submit" id="roomButton" class="mt-3 flex w-full items-center justify-center rounded-md border border-transparent bg-black    px-5 py-3 text-base font-medium text-white hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-700 sm:mt-0 sm:ml-3 sm:w-auto sm:flex-shrink-0">
                            
                         Create Room
                                                  
                        </button>
                        </form>
                        <p class="mt-3 text-sm text-gray-100">
                        We care about the protection of your data. Read our
                        <a href="" class="font-medium text-white underline">Privacy Policy.</a>
                        </p>
                    </div>
                    </div>
                </div>


            </div>
            <div class="flex flex-col justify-center items-center">
                <div class="!z-5 relative flex flex-col rounded-[20px] max-w-[300px] bg-white bg-clip-border shadow-3xl shadow-shadow-500 flex flex-col w-full !p-4 3xl:p-![18px] bg-white undefined">
                     
                <div class="relative flex flex-row justify-between">
                    <div class="flex items-center">
                    <div class="flex h-9 w-9 items-center justify-center rounded-full bg-indigo-100 dark:bg-indigo-100 dark:bg-white/5">
                       <span class="material-symbols-rounded h-6 w-6 text-brand-500 dark:text-white">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z" />
                          </svg>
                          
                        </span>  
                    </div>
                    <h4 class="ml-4 text-xl font-bold text-navy-700 dark:text-white">
                        Chat Room ID's
                    </h4>
                    </div>
                    <!-- <button 
                    class='flex items-center text-xl hover:cursor-pointer bg-lightPrimary p-2 text-brand-500 hover:bg-gray-100 dark:bg-navy-700 dark:text-white dark:hover:bg-white/20 dark:active:bg-white/10 rounded-lg'
                    >
                    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="h-6 w-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"></path></svg>
                    </button> -->
                </div>
                {%for room in rooms%} 

                <div class="h-full w-full">
                    <div class="mt-5 flex items-center justify-between p-2">
                        <div class="flex items-center justify-center gap-2">
                            
                            <p class="text-base font-bold text-navy-700 dark:text-white">
                                {{room}}

                            </p>
                        </div>
                        <span onclick="setValue('{{room}}')" class="material-symbols-rounded bg-black  h-6 w-fit px-3 rounded-2xl text-white cursor-pointer">
                            Select
                        </span>  
                    </div>
                    {%endfor%} 

                    
                </div>
                </div>
                <p class="font-normal text-navy-700 mt-20 mx-auto w-max">Select a room id to join that chat room <a href="https://horizon-ui.com?ref=tailwindcomponents.com" target="_blank" class="text-brand-500 font-bold">and enjoy Dwani Chats </a></p>  
            </div>
  

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js" integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA==" crossorigin="anonymous"></script>

    <script type="text/javascript" charset="utf-8">
       
      

        function arrayParsing(roomList){
            let trimmedRoomArray = roomList.slice(1, -1);
            roomArray = trimmedRoomArray.split(',')
            let cleanedArr = roomArray.map(item => item.replace(/&#39;/g, ''));
            cleanedArr = cleanedArr.map(item => item.trim());
            return cleanedArr
        }

        function checkRoomID(event){


            var chatRooms = "{{rooms}}";
            
            chatRoomList = arrayParsing(chatRooms)


            if(chatRoomList.includes(event.target.value)){

                    var roomBut = document.getElementById('roomButton')
                    roomBut.textContent  = 'Join Room'
            }else{
                     var roomBut = document.getElementById('roomButton')
                    roomBut.textContent  = 'Create Room'
            }
        

        }


          
       function setValue(roomID) {
            document.getElementById('room-id').value = roomID;
            let myObj = {
                target : {
                    value : roomID
                }
            }
            checkRoomID(myObj)
        }

    </script>

</body>
</html>
